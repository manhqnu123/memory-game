<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Memory Game</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="container">
      <h1>Memory Game</h1>
      <div class="game"></div>
      <button class="reset" onclick="window.location.reload()">
        Reset Game
      </button>
    </div>
    <script>
      const emojis = [
        "🤣",
        "🤣",
        "🤮",
        "🤮",
        "😊",
        "😊",
        "😂",
        "😂",
        "❤️",
        "❤️",
        "😍",
        "😍",
        "🐒",
        "🐒",
        "🦍",
        "🦍",
      ];
      var shuf_emojis = emojis.sort(() => Math.random() - 0.5);
      let flippedCards = [];
      let matchedCount = 0;

      for (let i = 0; i < emojis.length; i++) {
        let card = document.createElement("div");
        card.className = "item";
        card.innerHTML = shuf_emojis[i];
        card.dataset.index = i;
        card.onclick = function () {
          // Không cho lật lại thẻ đã matched hoặc đã lật
          if (this.classList.contains("matched") || flippedCards.includes(this))
            return;
          if (flippedCards.length < 2) {
            this.classList.add("flipped");
            flippedCards.push(this);
          }
          if (flippedCards.length === 2) {
            setTimeout(() => {
              if (flippedCards[0].innerHTML === flippedCards[1].innerHTML) {
                flippedCards[0].classList.add("matched");
                flippedCards[1].classList.add("matched");
                matchedCount += 2;
                if (matchedCount === emojis.length) {
                  alert("Congratulations! You've matched all the cards!");
                }
              }
              flippedCards[0].classList.remove("flipped");
              flippedCards[1].classList.remove("flipped");
              flippedCards = [];
            }, 500);
          }
        };
        document.querySelector(".game").appendChild(card);
      }
    </script>
  </body>
</html>
